# This file includes all possible configurations for tarcinapp.
# With this configuration
# - User can create book and author records as generic entity.
# - A book and author record is unique by it's name.
# - There is not approval process. All created entities became valid right after
# it's creation.
# - All created generic entities are visible only to it's creator (private).


# ENV configuration
NODE_ENV=development

# logging
LOG_LEVEL=info
LOG_FORMAT=json
LOG_TIMESTAMP=true
LOG_SERVICE=entity-persistence-service

# binding configuration
HOST=localhost
PORT=3000

# database configurations
#MONGODB_HOST=localhost
#MONGODB_PORT=27017
#MONGODB_USER=tappuser
#MONGODB_PASSWORD=tapppass123!
#MONGODB_DATABASE=tappdb
MONGODB_URL=

# collections
COLLECTION_ENTITY=BooksAndAuthors
COLLECTION_LIST=Lists
COLLECTION_ENTITY_REACTIONS=Reactions
COLLECTION_LIST_REACTIONS=ListReactions
COLLECTION_LIST_ENTITY_REL=Relations

# lookup constraints
ENTITY_LOOKUP_CONSTRAINT=
LIST_LOOKUP_CONSTRAINT=
ENTITY_REACTION_LOOKUP_CONSTRAINT=
LIST_REACTION_LOOKUP_CONSTRAINT=

# allowed kinds
ENTITY_KINDS=book,author
LIST_KINDS=bookshelf,read,to-read
LIST_ENTITY_REL_KINDS=contains
ENTITY_REACTION_KINDS=like,comment,rating,flag
LIST_REACTION_KINDS=like,comment,rating,flag

# default kinds
DEFAULT_ENTITY_KIND=book
DEFAULT_LIST_KIND=bookshelf
DEFAULT_RELATION_KIND=contains
DEFAULT_ENTITY_REACTION_KIND=like
DEFAULT_LIST_REACTION_KIND=like

ENTITY_UNIQUENESS="where[_kind]=${kind}&where[slug]=${slug}"
LIST_UNIQUENESS="where[_kind]=${kind}&where[slug]=${slug}"
RELATION_UNIQUENESS="where[_listId]=${_listId}&where[_entityId]=${_entityId}&where[_kind]=${kind}"
ENTITY_REACTION_UNIQUENESS="where[_kind]=${kind}&where[_entityId]=${_entityId}"
LIST_REACTION_UNIQUENESS="where[_kind]=${kind}&where[_listId]=${_listId}"

# auto approve configurations
AUTOAPPROVE_ENTITY=false
AUTOAPPROVE_LIST=false
AUTOAPPROVE_ENTITY_REACTION=true
AUTOAPPROVE_LIST_REACTION=true
AUTOAPPROVE_LIST_ENTITY_RELATIONS=true

# visibility
VISIBILITY_ENTITY=protected
VISIBILITY_LIST=protected
VISIBILITY_ENTITY_REACTION=protected
VISIBILITY_LIST_REACTION=protected

# response limits
RESPONSE_LIMIT_ENTITY=100
RESPONSE_LIMIT_LIST=100
RESPONSE_LIMIT_LIST_ENTITY_REL=100
RESPONSE_LIMIT_ENTITY_REACTION=100
RESPONSE_LIMIT_LIST_REACTION=100

# record limits
ENTITY_RECORD_LIMITS='[{"scope":"","limit":2, "duration":"1min"},{"scope":"","limit":500}]'
LIST_RECORD_LIMITS='[{"scope":"","limit":500}]'
RELATION_RECORD_LIMITS='[{"scope":"","limit":500}]'
ENTITY_REACTION_RECORD_LIMITS='[{"scope":"","limit":1000}]'
LIST_REACTION_RECORD_LIMITS='[{"scope":"","limit":1000}]'

# Examples showing duration-based limits
# ENTITY_RECORD_LIMITS='[{"scope":"where[_kind]=book","limit":100,"duration":"30d"}]'
# ENTITY_REACTION_RECORD_LIMITS='[{"scope":"where[_entityId]=${_entityId}","limit":500,"duration":"30d"}]'

# idempotency configurations
IDEMPOTENCY_ENTITY=
IDEMPOTENCY_LIST=
IDEMPOTENCY_ENTITY_REACTION=
IDEMPOTENCY_LIST_REACTION=
IDEMPOTENCY_LIST_ENTITY_REL=

